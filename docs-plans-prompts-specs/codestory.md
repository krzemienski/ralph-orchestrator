# Code Story - Comprehensive Product Requirements Document & Technical Specification

## Overview

Code Story is an **open-source, developer-first platform** that transforms code repositories into tailored audio narratives. Unlike general-purpose tools like NotebookLM, Code Story is purpose-built for developers and technical experts who need deep, customizable control over how their code is analyzed and narrated.

**Core Differentiators:**
- **Open Source:** Full codebase available for self-hosting and customization
- **Developer-First:** Built by developers, for developersâ€”with API access for integration
- **Intent-Driven Generation:** Users define what they want to learn, not just what repository to analyze
- **Claude Agent SDK:** Multi-agent architecture with specialized skills for code analysis and storytelling
- **Hosted + Self-Hosted Options:** Free hosted playground + self-deploy for teams

**Product Vision:** Empower developers to extract exactly the knowledge they need from any codebase through AI-powered, intent-driven audio narratives.

**Repository:** `github.com/codestory/codestory` (MIT License)
**Hosted Version:** `codestory.dev` (free tier + pro plans)

---

## Platform Architecture

### High-Level System Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CODE STORY SYSTEM                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FRONTEND LAYER                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   Web Application    â”‚    â”‚   Mobile Application â”‚                           â”‚
â”‚  â”‚   â€¢ React 18+        â”‚    â”‚   â€¢ Expo (React Native)                          â”‚
â”‚  â”‚   â€¢ Tailwind CSS     â”‚    â”‚   â€¢ NativeWind                                   â”‚
â”‚  â”‚   â€¢ shadcn/ui        â”‚    â”‚   â€¢ Expo Audio                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BACKEND LAYER (Python + Claude Agent SDK)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      CLAUDE AGENT ORCHESTRATOR                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚  Intent     â”‚  â”‚  Repo       â”‚  â”‚  Story      â”‚  â”‚  Voice      â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  Agent      â”‚  â”‚  Analyzer   â”‚  â”‚  Architect  â”‚  â”‚  Director   â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  (Onboard)  â”‚  â”‚  Agent      â”‚  â”‚  Agent      â”‚  â”‚  Agent      â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  CUSTOM SKILLS LIBRARY                                                    â”‚   â”‚
â”‚  â”‚  â€¢ code_structure_mapping    â€¢ narrative_chapter_builder                 â”‚   â”‚
â”‚  â”‚  â€¢ dependency_analyzer       â€¢ voice_script_formatter                    â”‚   â”‚
â”‚  â”‚  â€¢ pattern_recognizer        â€¢ elevenlabs_synthesizer                    â”‚   â”‚
â”‚  â”‚  â€¢ documentation_extractor   â€¢ github_repository_fetcher                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   FastAPI Server     â”‚    â”‚   Voice Pipeline     â”‚                           â”‚
â”‚  â”‚   â€¢ REST API         â”‚    â”‚   â€¢ ElevenLabs API   â”‚                           â”‚
â”‚  â”‚   â€¢ WebSocket        â”‚    â”‚   â€¢ Audio Processing â”‚                           â”‚
â”‚  â”‚   â€¢ Auth/JWT         â”‚    â”‚   â€¢ Chapter Assembly â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DATA LAYER                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   PostgreSQL         â”‚    â”‚   S3/Cloud Storage   â”‚                           â”‚
â”‚  â”‚   â€¢ Users            â”‚    â”‚   â€¢ Audio Files      â”‚                           â”‚
â”‚  â”‚   â€¢ Stories          â”‚    â”‚   â€¢ Cached Analysis  â”‚                           â”‚
â”‚  â”‚   â€¢ Intents          â”‚    â”‚   â€¢ Generated Scriptsâ”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack Summary

LayerTechnologyPurposeWeb FrontendReact 18+ + Tailwind CSS + shadcn/uiBrowser-based user interfaceMobile FrontendExpo (React Native) + NativeWindCross-platform iOS/Android appBackend APIPython + FastAPIREST API, authentication, orchestrationAI Engine**Claude Agent SDK (Python)**Multi-agent orchestration with custom skillsVoice SynthesisElevenLabs APIAudio narrative generationDatabasePostgreSQLRelational data persistenceStorageS3/Cloud StorageAudio files and cached dataQueueRedis + CeleryAsync job processing

---

## Intent-Driven Story Generation

### The Core Concept: User Intent First

Unlike tools that simply dump information about a repository, Code Story starts by understanding **what the user actually wants to learn or accomplish**. This fundamentally changes the generation process:

```
Traditional Approach:
Repository â†’ Generic Analysis â†’ Generic Narrative

Code Story Approach:
User Intent + Repository â†’ Targeted Analysis â†’ Custom-Structured Narrative
```

### Intent Categories

Intent CategoryDescriptionExample User Input**Architecture Understanding**How is this project structured?"I want to understand the overall architecture and how the modules connect"**Onboarding Deep-Dive**I'm joining a team, help me get up to speed"I'm a new developer on this project, explain the key areas I need to know"**Specific Feature Focus**I need to understand one part deeply"Explain the authentication system and how it integrates with the API"**Code Review Prep**I'm reviewing this PR or codebase"Help me understand this codebase before my code review"**Learning Patterns**What patterns and best practices are used?"What design patterns does this project use and why?"**API Documentation**How do I use this library/API?"Explain how to use this SDK with practical examples"**Bug Investigation**Help me understand code flow for debugging"Walk me through how a request flows from the API to the database"**Migration Planning**I need to understand before refactoring"I'm planning to migrate this to microservices, explain the dependencies"

### Chapter Structure Based on Intent

Each intent category generates a different chapter structure:

Architecture Understanding Chapters

```
1. Project Overview & Purpose
2. High-Level Architecture Diagram (described)
3. Core Modules & Their Responsibilities
4. Data Flow & Communication Patterns
5. External Dependencies & Integrations
6. Key Configuration & Environment Setup
7. Summary & Mental Model
```

Onboarding Deep-Dive Chapters

```
1. Welcome & Project Context
2. Getting Started: Setup & First Run
3. Directory Tour: Where Things Live
4. The Main Players: Key Files & Components
5. Common Tasks: How to Add Features
6. Testing & Quality Practices
7. Deployment & Environments
8. Team Conventions & Best Practices
9. Resources & Next Steps
```

Specific Feature Focus Chapters

```
1. Feature Overview & Purpose
2. Entry Points & Triggers
3. Core Logic Walkthrough
4. Data Structures & Models
5. Edge Cases & Error Handling
6. Integration Points
7. Testing This Feature
8. Summary & Key Takeaways
```

---

## Onboarding Experience: The Intent Conversation

### Conversation Flow Design

The onboarding is a **conversational back-and-forth** powered by the Intent Agent. Users can:
- **Skip everything** â†’ AI generates based on intelligent defaults
- **Minimal input** â†’ Quick selections, AI fills in the rest
- **Full customization** â†’ Detailed conversation to tailor every aspect

### Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ONBOARDING FLOW                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  START                                                                       â”‚
â”‚    â”‚                                                                         â”‚
â”‚    â–¼                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚  "What repository do you want to        â”‚                                â”‚
â”‚  â”‚   turn into a story?"                   â”‚                                â”‚
â”‚  â”‚                                          â”‚                                â”‚
â”‚  â”‚  [Paste GitHub URL]                     â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚    â”‚                                                                         â”‚
â”‚    â–¼                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚  Repository Validated âœ“                 â”‚                                â”‚
â”‚  â”‚  "fastapi/fastapi - 68k â­, Python"     â”‚                                â”‚
â”‚  â”‚                                          â”‚                                â”‚
â”‚  â”‚  â—‹ Quick Generate (AI decides)          â”‚  â†â”€â”€ SKIP PATH                 â”‚
â”‚  â”‚  â— Customize My Story                   â”‚  â†â”€â”€ DETAILED PATH             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚    â”‚                                                                         â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€ SKIP â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚    â”‚                      â”‚                                                 â”‚
â”‚    â–¼                      â–¼                                                 â”‚
â”‚  DETAILED PATH        QUICK PATH                                            â”‚
â”‚    â”‚                      â”‚                                                 â”‚
â”‚    â–¼                      â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                 â”‚
â”‚  â”‚ Intent Conversation â”‚  â”‚                                                 â”‚
â”‚  â”‚ (see below)         â”‚  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                 â”‚
â”‚    â”‚                      â”‚                                                 â”‚
â”‚    â–¼                      â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                 â”‚
â”‚  â”‚ Style & Voice       â”‚  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                 â”‚
â”‚    â”‚                      â”‚                                                 â”‚
â”‚    â–¼                      â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                 â”‚
â”‚  â”‚ Length & Depth      â”‚  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                 â”‚
â”‚    â”‚                      â”‚                                                 â”‚
â”‚    â–¼                      â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚          GENERATE STORY                 â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 1: Repository Input

**Screen: Repository Input**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  [Logo] Code Story                                                           â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚        What code do you want to understand?                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  https://github.com/                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  [Continue â†’]                                                               â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  Popular repositories to try:                                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ fastapi/fastapi â”‚ â”‚ langchain-ai/   â”‚ â”‚ vercel/next.js  â”‚               â”‚
â”‚  â”‚ â­ 68k â€¢ Python â”‚ â”‚ langchain       â”‚ â”‚ â­ 118k â€¢ JS    â”‚               â”‚
â”‚  â”‚                 â”‚ â”‚ â­ 75k â€¢ Python â”‚ â”‚                 â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 2: Quick vs. Custom Choice

**Screen: Generation Mode**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  âœ“ Repository validated                                                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ”— fastapi/fastapi                                                  â”‚    â”‚
â”‚  â”‚     Python â€¢ 68,234 â­ â€¢ High-performance web framework             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  How would you like to proceed?                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  âš¡ Quick Generate                                                   â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  Let AI analyze the repo and create a comprehensive overview.        â”‚    â”‚
â”‚  â”‚  ~10-15 minute story covering architecture, key components,          â”‚    â”‚
â”‚  â”‚  and patterns.                                                        â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  [Generate Now â†’]                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸŽ¯ Customize My Story                                               â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  Tell us what you want to learn. We'll tailor the analysis,          â”‚    â”‚
â”‚  â”‚  structure, length, and style to your specific needs.                â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  [Start Conversation â†’]                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 3: Intent Conversation (Detailed Path)

**Screen: Conversational Onboarding**

This is an AI-driven chat interface that adapts based on user responses:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Back]                 Story Setup                        [Skip to End]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ¤– Code Story AI                                                    â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  I see you want to explore **fastapi/fastapi**. Great choice!        â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  To create the perfect story for you, I have a few questions.        â”‚    â”‚
â”‚  â”‚  Feel free to answer as much or as little as you likeâ€”I can          â”‚    â”‚
â”‚  â”‚  fill in the gaps.                                                    â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  **What's your main goal with this codebase?**                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  Quick options:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Understand    â”‚ â”‚ Learn how to  â”‚ â”‚ Prepare for   â”‚ â”‚ Explore       â”‚   â”‚
â”‚  â”‚ architecture  â”‚ â”‚ contribute    â”‚ â”‚ a code review â”‚ â”‚ specific      â”‚   â”‚
â”‚  â”‚               â”‚ â”‚               â”‚ â”‚               â”‚ â”‚ feature       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  Or type your own:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  I'm building a similar framework and want to understand how        â”‚    â”‚
â”‚  â”‚  FastAPI handles dependency injection...                        â”‚â–Œ   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  [Send â†’]                                                                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Conversation Continues:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  ðŸ‘¤ You                                                                      â”‚
â”‚  I'm building a similar framework and want to understand how FastAPI        â”‚
â”‚  handles dependency injection and the request lifecycle.                    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  ðŸ¤– Code Story AI                                                            â”‚
â”‚                                                                              â”‚
â”‚  Perfect! So you're interested in **deep technical understanding** of       â”‚
â”‚  specific systems. I'll focus the story on:                                 â”‚
â”‚                                                                              â”‚
â”‚  â€¢ Dependency injection architecture                                        â”‚
â”‚  â€¢ Request/response lifecycle                                               â”‚
â”‚  â€¢ How these patterns connect to the broader framework                      â”‚
â”‚                                                                              â”‚
â”‚  **How much time do you have?**                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Quick      â”‚ â”‚ Standard   â”‚ â”‚ Deep Dive  â”‚ â”‚ Exhaustive â”‚              â”‚
â”‚  â”‚ ~5 min     â”‚ â”‚ ~15 min    â”‚ â”‚ ~30 min    â”‚ â”‚ ~45+ min   â”‚              â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚            â”‚ â”‚            â”‚              â”‚
â”‚  â”‚ Key        â”‚ â”‚ Thorough   â”‚ â”‚ Detailed   â”‚ â”‚ Everything â”‚              â”‚
â”‚  â”‚ highlights â”‚ â”‚ coverage   â”‚ â”‚ + examples â”‚ â”‚ + tangents â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**After a few exchanges, show the generated plan:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  ðŸ¤– Code Story AI                                                            â”‚
â”‚                                                                              â”‚
â”‚  Here's what I've planned for your story:                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ“– YOUR CUSTOM STORY PLAN                                          â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  **Title:** FastAPI Deep Dive: Dependency Injection & Lifecycle      â”‚    â”‚
â”‚  â”‚  **Style:** Technical Deep-Dive                                      â”‚    â”‚
â”‚  â”‚  **Length:** ~30 minutes (Deep Dive)                                â”‚    â”‚
â”‚  â”‚  **Voice:** Antoni (Clear, technical)                                â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  **Chapter Structure:**                                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ 1. Introduction & Context                          ~2 min  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ 2. The Depends() Function: Entry Point             ~5 min  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ 3. Dependency Resolution Algorithm                 ~7 min  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ 4. Request Lifecycle: From Route to Response       ~8 min  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ 5. Caching & Scoped Dependencies                   ~4 min  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ 6. Patterns You Can Apply to Your Framework        ~4 min  â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  **Focus Areas:**                                                    â”‚    â”‚
â”‚  â”‚  â€¢ dependencies/ directory                                           â”‚    â”‚
â”‚  â”‚  â€¢ routing.py request handling                                       â”‚    â”‚
â”‚  â”‚  â€¢ params.py dependency classes                                      â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ âœï¸ Edit Plan       â”‚  â”‚ âœ“ Generate Story   â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 4: Style & Voice Selection

**Screen: Style Selection (if not using Quick Generate)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  How should your story sound?                                               â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  NARRATIVE STYLE                                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ðŸŽ­ Fiction      â”‚ â”‚ ðŸ“° Documentary  â”‚ â”‚ ðŸ‘¨â€ðŸ« Tutorial    â”‚               â”‚
â”‚  â”‚                 â”‚ â”‚    âœ“ SELECTED   â”‚ â”‚                 â”‚               â”‚
â”‚  â”‚ Code as         â”‚ â”‚ Authoritative   â”‚ â”‚ Step-by-step    â”‚               â”‚
â”‚  â”‚ characters      â”‚ â”‚ factual style   â”‚ â”‚ teaching        â”‚               â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚               â”‚
â”‚  â”‚ [â–¶ Preview]     â”‚ â”‚ [â–¶ Preview]     â”‚ â”‚ [â–¶ Preview]     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ ðŸŽ™ï¸ Podcast      â”‚ â”‚ âš™ï¸ Technical    â”‚                                    â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚                                    â”‚
â”‚  â”‚ Conversational  â”‚ â”‚ Dense, detailed â”‚                                    â”‚
â”‚  â”‚ casual tone     â”‚ â”‚ expert-level    â”‚                                    â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚                                    â”‚
â”‚  â”‚ [â–¶ Preview]     â”‚ â”‚ [â–¶ Preview]     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  VOICE                                                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ðŸŽ¤ Rachel   â”‚ â”‚ ðŸŽ¤ Drew     â”‚ â”‚ ðŸŽ¤ Brian    â”‚ â”‚ ðŸŽ¤ Antoni   â”‚           â”‚
â”‚  â”‚    â–¶ Play  â”‚ â”‚    â–¶ Play  â”‚ â”‚    â–¶ Play  â”‚ â”‚    â–¶ Play  â”‚           â”‚
â”‚  â”‚ Warm,      â”‚ â”‚ Authoritat. â”‚ â”‚ Friendly   â”‚ â”‚ Clear,     â”‚           â”‚
â”‚  â”‚ narrative  â”‚ â”‚ documentary â”‚ â”‚ teacher    â”‚ â”‚ technical  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚  [Continue â†’]                                                               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 5: Length & Depth Configuration

**Screen: Length & Depth**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  How deep should we go?                                                     â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  STORY LENGTH                                                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚    Quick          Standard        Deep Dive       Exhaustive         â”‚    â”‚
â”‚  â”‚    ~5 min         ~15 min         ~30 min         ~45+ min           â”‚    â”‚
â”‚  â”‚      â”‚               â”‚               â—               â”‚               â”‚    â”‚
â”‚  â”‚      â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹               â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  **Deep Dive** includes:                                                    â”‚
â”‚  â€¢ Comprehensive coverage of selected topics                                â”‚
â”‚  â€¢ Code examples and patterns explained                                     â”‚
â”‚  â€¢ Context and "why" behind decisions                                       â”‚
â”‚  â€¢ Connections to broader architecture                                      â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  EXPERTISE LEVEL                                                             â”‚
â”‚                                                                              â”‚
â”‚  â—‹ Beginner â€” Explain concepts, define terms, use analogies                 â”‚
â”‚  â— Intermediate â€” Assume programming knowledge, focus on patterns           â”‚
â”‚  â—‹ Expert â€” Dense information, no hand-holding, maximum detail              â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  CHAPTER PREFERENCES                                                         â”‚
â”‚                                                                              â”‚
â”‚  â–¡ Include code snippets read aloud                                         â”‚
â”‚  â˜‘ Add "pause and reflect" moments                                          â”‚
â”‚  â˜‘ Include related file references                                          â”‚
â”‚  â–¡ Add quiz questions at chapter ends                                       â”‚
â”‚                                                                              â”‚
â”‚  [Generate Story â†’]                                                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Claude Agent SDK Architecture

### Agent System Overview

Code Story uses the **Claude Agent SDK** with custom-built skills to create a sophisticated multi-agent pipeline. Each agent has specific responsibilities and can delegate to others.

```python
from anthropic import Anthropic
from anthropic.types.beta import BetaMessageParam
import json
from typing import Any, Callable
from dataclasses import dataclass, field

# Agent SDK Core Setup
client = Anthropic()
MODEL_NAME = "claude-sonnet-4-20250514"


@dataclass
class Skill:
    """A callable skill that an agent can use."""
    name: str
    description: str
    parameters: dict
    function: Callable[..., Any]


@dataclass
class Agent:
    """An agent with specific responsibilities and skills."""
    name: str
    system_prompt: str
    skills: list[Skill] = field(default_factory=list)
    model: str = MODEL_NAME

    def get_tools(self) -> list[dict]:
        """Convert skills to Claude tool format."""
        return [
            {
                "name": skill.name,
                "description": skill.description,
                "input_schema": skill.parameters
            }
            for skill in self.skills
        ]

    def execute_skill(self, skill_name: str, **kwargs) -> Any:
        """Execute a skill by name."""
        for skill in self.skills:
            if skill.name == skill_name:
                return skill.function(**kwargs)
        raise ValueError(f"Skill {skill_name} not found")


class AgentOrchestrator:
    """Orchestrates multiple agents to complete complex tasks."""

    def __init__(self):
        self.agents: dict[str, Agent] = {}
        self.conversation_history: list[BetaMessageParam] = []

    def register_agent(self, agent: Agent):
        self.agents[agent.name] = agent

    async def run_agent(
        self,
        agent_name: str,
        user_message: str,
        context: dict | None = None
    ) -> dict:
        """Run a specific agent with a message."""
        agent = self.agents[agent_name]

        messages = [{"role": "user", "content": user_message}]
        if context:
            messages[0]["content"] = f"Context: {json.dumps(context)}\n\n{user_message}"

        response = client.messages.create(
            model=agent.model,
            max_tokens=4096,
            system=agent.system_prompt,
            tools=agent.get_tools(),
            messages=messages
        )

        # Process tool calls
        while response.stop_reason == "tool_use":
            tool_results = []
            for block in response.content:
                if block.type == "tool_use":
                    result = agent.execute_skill(block.name, **block.input)
                    tool_results.append({
                        "type": "tool_result",
                        "tool_use_id": block.id,
                        "content": json.dumps(result) if isinstance(result, dict) else str(result)
                    })

            messages.append({"role": "assistant", "content": response.content})
            messages.append({"role": "user", "content": tool_results})

            response = client.messages.create(
                model=agent.model,
                max_tokens=4096,
                system=agent.system_prompt,
                tools=agent.get_tools(),
                messages=messages
            )

        # Extract final text response
        final_text = ""
        for block in response.content:
            if hasattr(block, "text"):
                final_text += block.text

        return {"response": final_text, "messages": messages}
```

---

### Agent 1: Intent Agent (Onboarding)

**Purpose:** Engage in conversation with the user to understand their goals, then produce a structured story plan.

```python
# Intent Agent Skills

def analyze_user_intent(user_message: str, repo_info: dict) -> dict:
    """Analyze user's stated intent and categorize it."""
    # This would use Claude to classify the intent
    return {
        "primary_intent": "architecture_understanding",
        "secondary_intents": ["pattern_learning"],
        "focus_areas": ["dependency_injection", "request_lifecycle"],
        "expertise_level": "intermediate",
        "suggested_depth": "deep_dive"
    }


def generate_story_plan(
    intent_analysis: dict,
    repo_structure: dict,
    user_preferences: dict
) -> dict:
    """Generate a chapter-by-chapter story plan based on intent."""
    return {
        "title": "FastAPI Deep Dive: Dependency Injection & Lifecycle",
        "estimated_duration_minutes": 30,
        "chapters": [
            {
                "number": 1,
                "title": "Introduction & Context",
                "duration_minutes": 2,
                "focus_files": ["README.md", "fastapi/__init__.py"],
                "key_concepts": ["framework purpose", "design philosophy"]
            },
            # ... more chapters
        ],
        "narrative_style": "technical",
        "voice_recommendation": "antoni"
    }


def suggest_follow_up_questions(current_context: dict) -> list[str]:
    """Suggest questions to clarify user intent."""
    return [
        "Are you more interested in how to use these patterns or how they're implemented?",
        "Should I include comparisons to other frameworks you might know?",
        "Do you want me to cover testing strategies for these components?"
    ]


INTENT_AGENT_SKILLS = [
    Skill(
        name="analyze_user_intent",
        description="Analyze the user's message to understand what they want to learn from the codebase",
        parameters={
            "type": "object",
            "properties": {
                "user_message": {"type": "string", "description": "The user's description of what they want"},
                "repo_info": {"type": "object", "description": "Basic repository information"}
            },
            "required": ["user_message", "repo_info"]
        },
        function=analyze_user_intent
    ),
    Skill(
        name="generate_story_plan",
        description="Create a detailed chapter-by-chapter plan for the story",
        parameters={
            "type": "object",
            "properties": {
                "intent_analysis": {"type": "object"},
                "repo_structure": {"type": "object"},
                "user_preferences": {"type": "object"}
            },
            "required": ["intent_analysis", "repo_structure", "user_preferences"]
        },
        function=generate_story_plan
    ),
    Skill(
        name="suggest_follow_up_questions",
        description="Suggest clarifying questions to better understand user needs",
        parameters={
            "type": "object",
            "properties": {
                "current_context": {"type": "object"}
            },
            "required": ["current_context"]
        },
        function=suggest_follow_up_questions
    )
]

INTENT_AGENT_SYSTEM_PROMPT = """You are the Intent Agent for Code Story, a platform that creates 
audio narratives from code repositories.

Your role is to have a natural conversation with the user to understand:
1. What they want to learn or accomplish with this codebase
2. Their current expertise level
3. How much time they have
4. Any specific areas of focus

Be conversational but efficient. Ask clarifying questions when needed, but don't over-question.
If the user gives a clear, detailed response, move forward with generating a plan.

You have access to skills for:
- Analyzing user intent and categorizing their goals
- Generating story plans with chapter structures
- Suggesting follow-up questions

When you have enough information, use generate_story_plan to create a detailed plan.
Present the plan to the user and ask if they want to modify it.

Remember: Users can skip the conversation entirely, so respect their time. 
If they seem impatient, offer to proceed with reasonable defaults."""

intent_agent = Agent(
    name="intent_agent",
    system_prompt=INTENT_AGENT_SYSTEM_PROMPT,
    skills=INTENT_AGENT_SKILLS
)
```

---

### Agent 2: Repository Analyzer Agent

**Purpose:** Deep analysis of repository structure, code patterns, and documentation.

```python
import ast
import httpx
import base64
from pathlib import Path


# Repository Analyzer Skills

async def fetch_repository_tree(owner: str, repo: str, token: str | None = None) -> dict:
    """Fetch the complete file tree from GitHub."""
    headers = {"Accept": "application/vnd.github+json"}
    if token:
        headers["Authorization"] = f"Bearer {token}"

    async with httpx.AsyncClient() as client:
        # Get default branch
        repo_response = await client.get(
            f"https://api.github.com/repos/{owner}/{repo}",
            headers=headers
        )
        repo_data = repo_response.json()
        default_branch = repo_data.get("default_branch", "main")

        # Get tree
        tree_response = await client.get(
            f"https://api.github.com/repos/{owner}/{repo}/git/trees/{default_branch}?recursive=1",
            headers=headers
        )
        return tree_response.json()


async def fetch_file_content(owner: str, repo: str, path: str, token: str | None = None) -> str:
    """Fetch and decode a specific file's content."""
    headers = {"Accept": "application/vnd.github+json"}
    if token:
        headers["Authorization"] = f"Bearer {token}"

    async with httpx.AsyncClient() as client:
        response = await client.get(
            f"https://api.github.com/repos/{owner}/{repo}/contents/{path}",
            headers=headers
        )
        data = response.json()
        return base64.b64decode(data["content"]).decode("utf-8")


def analyze_python_structure(content: str, file_path: str) -> dict:
    """Analyze Python file structure using AST."""
    try:
        tree = ast.parse(content)
        return {
            "file_path": file_path,
            "classes": [
                {
                    "name": node.name,
                    "methods": [m.name for m in node.body if isinstance(m, ast.FunctionDef)],
                    "docstring": ast.get_docstring(node),
                    "line": node.lineno,
                    "bases": [
                        base.id if isinstance(base, ast.Name) else str(base)
                        for base in node.bases
                    ]
                }
                for node in ast.walk(tree)
                if isinstance(node, ast.ClassDef)
            ],
            "functions": [
                {
                    "name": node.name,
                    "args": [arg.arg for arg in node.args.args],
                    "docstring": ast.get_docstring(node),
                    "line": node.lineno,
                    "is_async": isinstance(node, ast.AsyncFunctionDef)
                }
                for node in ast.iter_child_nodes(tree)
                if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef))
            ],
            "imports": extract_imports(tree),
            "module_docstring": ast.get_docstring(tree)
        }
    except SyntaxError as e:
        return {"file_path": file_path, "error": str(e)}


def extract_imports(tree: ast.AST) -> list[dict]:
    """Extract import statements from AST."""
    imports = []
    for node in ast.walk(tree):
        if isinstance(node, ast.Import):
            for alias in node.names:
                imports.append({"module": alias.name, "alias": alias.asname, "type": "import"})
        elif isinstance(node, ast.ImportFrom):
            imports.append({
                "module": node.module,
                "names": [{"name": a.name, "alias": a.asname} for a in node.names],
                "type": "from_import"
            })
    return imports


def identify_architectural_patterns(structure_analysis: dict) -> dict:
    """Identify design patterns and architectural decisions."""
    patterns = []
    indicators = []

    # Check for common patterns based on file/class names
    class_names = [c["name"].lower() for f in structure_analysis.get("files", [])
                   for c in f.get("classes", [])]
    file_names = [f["file_path"].lower() for f in structure_analysis.get("files", [])]

    # Factory pattern
    if any("factory" in name for name in class_names + file_names):
        patterns.append({
            "name": "Factory Pattern",
            "confidence": "high",
            "evidence": "Found factory classes/files"
        })

    # Repository pattern
    if any("repository" in name or "repo" in name for name in class_names + file_names):
        patterns.append({
            "name": "Repository Pattern",
            "confidence": "high",
            "evidence": "Found repository classes/files"
        })

    # Dependency Injection
    if any("inject" in name or "container" in name or "provider" in name
           for name in class_names + file_names):
        patterns.append({
            "name": "Dependency Injection",
            "confidence": "high",
            "evidence": "Found DI-related classes"
        })

    return {
        "patterns": patterns,
        "architecture_style": detect_architecture_style(structure_analysis),
        "key_components": identify_key_components(structure_analysis)
    }


def detect_architecture_style(structure: dict) -> str:
    """Detect overall architecture style."""
    # Simplified detection logic
    root_dirs = [Path(f["file_path"]).parts[0] for f in structure.get("files", [])
                 if len(Path(f["file_path"]).parts) > 1]
    root_dirs = list(set(root_dirs))

    if "services" in root_dirs and "api" in root_dirs:
        return "microservices"
    elif "models" in root_dirs and "views" in root_dirs and "controllers" in root_dirs:
        return "mvc"
    elif "domain" in root_dirs and "application" in root_dirs:
        return "clean_architecture"
    else:
        return "modular_monolith"


def identify_key_components(structure: dict) -> list[dict]:
    """Identify the most important files/components."""
    # Priority based on common patterns
    priority_patterns = [
        ("main", "entry_point"),
        ("app", "application_core"),
        ("config", "configuration"),
        ("router", "routing"),
        ("model", "data_models"),
        ("schema", "data_schemas"),
        ("service", "business_logic"),
        ("util", "utilities"),
        ("test", "testing")
    ]

    key_components = []
    for file_info in structure.get("files", []):
        path_lower = file_info["file_path"].lower()
        for pattern, component_type in priority_patterns:
            if pattern in path_lower:
                key_components.append({
                    "file": file_info["file_path"],
                    "type": component_type,
                    "importance": "high" if pattern in ["main", "app", "config"] else "medium"
                })
                break

    return key_components


REPO_ANALYZER_SKILLS = [
    Skill(
        name="fetch_repository_tree",
        description="Fetch the complete file tree structure from a GitHub repository",
        parameters={
            "type": "object",
            "properties": {
                "owner": {"type": "string", "description": "Repository owner"},
                "repo": {"type": "string", "description": "Repository name"},
                "token": {"type": "string", "description": "Optional GitHub token"}
            },
            "required": ["owner", "repo"]
        },
        function=fetch_repository_tree
    ),
    Skill(
        name="fetch_file_content",
        description="Fetch the content of a specific file from the repository",
        parameters={
            "type": "object",
            "properties": {
                "owner": {"type": "string"},
                "repo": {"type": "string"},
                "path": {"type": "string", "description": "File path within repository"},
                "token": {"type": "string"}
            },
            "required": ["owner", "repo", "path"]
        },
        function=fetch_file_content
    ),
    Skill(
        name="analyze_python_structure",
        description="Analyze a Python file's structure including classes, functions, and imports",
        parameters={
            "type": "object",
            "properties": {
                "content": {"type": "string", "description": "Python file content"},
                "file_path": {"type": "string"}
            },
            "required": ["content", "file_path"]
        },
        function=analyze_python_structure
    ),
    Skill(
        name="identify_architectural_patterns",
        description="Identify design patterns and architectural decisions in the codebase",
        parameters={
            "type": "object",
            "properties": {
                "structure_analysis": {"type": "object", "description": "Analyzed structure data"}
            },
            "required": ["structure_analysis"]
        },
        function=identify_architectural_patterns
    )
]


REPO_ANALYZER_SYSTEM_PROMPT = """You are the Repository Analyzer Agent for Code Story.

Your role is to deeply analyze code repositories to extract:
1. File structure and organization patterns
2. Key components and their responsibilities
3. Architectural patterns and design decisions
4. Dependencies and relationships between modules
5. Documentation and code comments

You have tools to:
- Fetch repository structure from GitHub
- Read specific files
- Analyze Python code structure (AST analysis)
- Identify architectural patterns

When analyzing, focus on:
- Entry points (main files, app initialization)
- Core business logic locations
- Data models and schemas
- API/interface definitions
- Configuration and environment handling

Output structured analysis that the Story Architect Agent can use to create narratives.
Be thorough but focusedâ€”prioritize files and patterns relevant to the user's stated intent."""

repo_analyzer_agent = Agent(
    name="repo_analyzer",
    system_prompt=REPO_ANALYZER_SYSTEM_PROMPT,
    skills=REPO_ANALYZER_SKILLS
)
```

---

### Agent 3: Story Architect Agent

**Purpose:** Transform analysis into narrative scripts with proper structure, pacing, and chapter organization.

```python
# Story Architect Skills

def create_chapter_script(
    chapter_plan: dict,
    analysis_data: dict,
    narrative_style: str,
    expertise_level: str
) -> dict:
    """Create a detailed script for a single chapter."""
    # This would use Claude to generate the actual narrative
    # Here we define the structure
    return {
        "chapter_number": chapter_plan["number"],
        "title": chapter_plan["title"],
        "duration_target_seconds": chapter_plan["duration_minutes"] * 60,
        "script_sections": [
            {
                "type": "introduction",
                "content": "...",
                "voice_direction": "warm, inviting"
            },
            {
                "type": "main_content",
                "content": "...",
                "voice_direction": "clear, authoritative"
            },
            {
                "type": "transition",
                "content": "...",
                "voice_direction": "bridging tone"
            }
        ],
        "key_terms_to_emphasize": ["dependency injection", "lifecycle"],
        "code_references": [
            {"file": "fastapi/dependencies.py", "lines": "45-67", "description": "The core Depends class"}
        ]
    }


def apply_narrative_style(raw_content: str, style: str, expertise: str) -> str:
    """Transform raw content into the specified narrative style."""
    style_instructions = {
        "fiction": "Transform into a story with code components as characters",
        "documentary": "Present as factual, authoritative documentary narration",
        "tutorial": "Frame as patient, step-by-step teaching",
        "podcast": "Make conversational with personality and natural speech",
        "technical": "Keep dense and information-rich for experts"
    }
    # Would use Claude to transform
    return raw_content


def calculate_pacing(script: str, target_duration_seconds: int) -> dict:
    """Calculate word count and suggest pacing adjustments."""
    word_count = len(script.split())
    # Average speaking rate: 150 words per minute
    estimated_duration = (word_count / 150) * 60

    return {
        "word_count": word_count,
        "estimated_duration_seconds": estimated_duration,
        "target_duration_seconds": target_duration_seconds,
        "adjustment_needed": estimated_duration - target_duration_seconds,
        "suggestion": "expand" if estimated_duration < target_duration_seconds * 0.9 else
                      "condense" if estimated_duration > target_duration_seconds * 1.1 else
                      "good"
    }


def add_voice_directions(script: str, emotional_beats: list[dict]) -> str:
    """Add voice direction markers for ElevenLabs."""
    # Add markers like [pause], [emphasis], emotional tags
    return script


def generate_chapter_transitions(chapters: list[dict]) -> list[str]:
    """Generate smooth transitions between chapters."""
    transitions = []
    for i in range(len(chapters) - 1):
        current = chapters[i]
        next_chapter = chapters[i + 1]
        transitions.append(
            f"Now that we've explored {current['title']}, "
            f"let's move on to {next_chapter['title']}..."
        )
    return transitions


STORY_ARCHITECT_SKILLS = [
    Skill(
        name="create_chapter_script",
        description="Create a detailed narrative script for a single chapter",
        parameters={
            "type": "object",
            "properties": {
                "chapter_plan": {"type": "object"},
                "analysis_data": {"type": "object"},
                "narrative_style": {"type": "string"},
                "expertise_level": {"type": "string"}
            },
            "required": ["chapter_plan", "analysis_data", "narrative_style", "expertise_level"]
        },
        function=create_chapter_script
    ),
    Skill(
        name="apply_narrative_style",
        description="Transform content into the specified narrative style",
        parameters={
            "type": "object",
            "properties": {
                "raw_content": {"type": "string"},
                "style": {"type": "string"},
                "expertise": {"type": "string"}
            },
            "required": ["raw_content", "style", "expertise"]
        },
        function=apply_narrative_style
    ),
    Skill(
        name="calculate_pacing",
        description="Calculate timing and suggest pacing adjustments",
        parameters={
            "type": "object",
            "properties": {
                "script": {"type": "string"},
                "target_duration_seconds": {"type": "integer"}
            },
            "required": ["script", "target_duration_seconds"]
        },
        function=calculate_pacing
    ),
    Skill(
        name="add_voice_directions",
        description="Add voice direction markers for synthesis",
        parameters={
            "type": "object",
            "properties": {
                "script": {"type": "string"},
                "emotional_beats": {"type": "array"}
            },
            "required": ["script", "emotional_beats"]
        },
        function=add_voice_directions
    ),
    Skill(
        name="generate_chapter_transitions",
        description="Create smooth transitions between chapters",
        parameters={
            "type": "object",
            "properties": {
                "chapters": {"type": "array"}
            },
            "required": ["chapters"]
        },
        function=generate_chapter_transitions
    )
]


# Dynamic prompts based on narrative style
NARRATIVE_STYLE_PROMPTS = {
    "fiction": """Transform the code analysis into an engaging fictional narrative.

RULES:
- Code components become characters with personalities
- The codebase is a world with locations (modules) and inhabitants (classes/functions)
- Technical concepts are woven into plot and dialogue
- Maintain complete technical accuracy while being creative
- Use metaphors from everyday life to explain complex concepts
- Include moments of tension, discovery, and resolution

EXAMPLE TONE:
"In the heart of the FastAPI kingdom, the Depends guardian stood watch. Every request 
that sought entry had to present its credentialsâ€”a sacred token proving its identity. 
But what made Depends truly powerful wasn't just its vigilance; it was its memory..."

Include [CHARACTER: name] tags for different "voices" in the story.""",

    "documentary": """Create an authoritative documentary-style narrative.

RULES:
- Present information as factual, investigative journalism
- Use professional, objective language
- Include specific metrics, file names, and line references
- Explain the "why" behind design decisions
- Structure with clear sections and topic transitions
- Cite evidence from the code itself

EXAMPLE TONE:
"The FastAPI repository contains 247 Python files organized across 12 primary modules. 
At its architectural core lies a sophisticated dependency injection systemâ€”a design 
decision that traces back to the framework's founding principle: developer experience 
should never come at the cost of performance..."

Include [SECTION: topic] markers for chapter breaks.""",

    "tutorial": """Create a patient, educational tutorial narrative.

RULES:
- Explain concepts progressively, building on prior knowledge
- Use the second person ("When you look at this file, you'll see...")
- Include "pause and think" moments
- Anticipate questions and address them
- Use analogies that relate to everyday experiences
- Celebrate small understanding milestones

EXAMPLE TONE:
"Let's start with a question: what happens when a request arrives at your FastAPI 
application? Don't worry if you're not sureâ€”that's exactly what we're going to 
explore together. Think of it like following a package through a sorting facility..."

Include [THINK: question] markers for reflection points.""",

    "podcast": """Create a conversational, podcast-style narrative.

RULES:
- Sound like a knowledgeable friend explaining over coffee
- Include natural speech patterns: "honestly", "here's the thing", "you know"
- Express genuine reactions and opinions
- Use humor where appropriate
- Share insights as discoveries, not lectures
- Include self-corrections and thinking out loud

EXAMPLE TONE:
"Okay, so I've been digging through this FastAPI codebase, and honestly? The way 
they've structured the dependency injection is... *chef's kiss*. Like, I've seen a 
lot of DI implementations, but this oneâ€”let me tell you why this is clever..."

Include [REACT: emotion] markers for natural expression.""",

    "technical": """Create a dense, technical deep-dive narrative.

RULES:
- No simplificationâ€”assume expert-level understanding
- Include specific implementation details
- Reference exact file paths, class names, function signatures
- Discuss trade-offs and alternative approaches
- Use proper technical terminology without explanation
- Focus on "how" and "why" at implementation level

EXAMPLE TONE:
"The dependency resolution algorithm in FastAPI implements a directed acyclic graph 
traversal with memoization. The `solve_dependencies` function in `dependencies/utils.py` 
(lines 145-203) performs a depth-first resolution, caching results in the request 
state to avoid redundant instantiation of scoped dependencies..."

Include [CODE: file:lines] markers for code references."""
}


def get_story_architect_prompt(narrative_style: str) -> str:
    """Get the appropriate system prompt for the narrative style."""
    base_prompt = """You are the Story Architect Agent for Code Story.

Your role is to transform repository analysis into compelling audio narratives.

You receive:
1. A story plan with chapters and focus areas
2. Detailed code analysis from the Repository Analyzer
3. User preferences (style, length, expertise level)

You produce:
1. Complete narrative scripts for each chapter
2. Voice direction markers for the synthesis agent
3. Timing estimates and pacing adjustments

"""
    style_prompt = NARRATIVE_STYLE_PROMPTS.get(narrative_style, NARRATIVE_STYLE_PROMPTS["documentary"])

    return base_prompt + "\n\nNARRATIVE STYLE INSTRUCTIONS:\n" + style_prompt


story_architect_agent = Agent(
    name="story_architect",
    system_prompt=get_story_architect_prompt("documentary"),  # Default
    skills=STORY_ARCHITECT_SKILLS
)
```

---

### Agent 4: Voice Director Agent

**Purpose:** Optimize scripts for ElevenLabs, manage audio generation, assemble final output.

```python
import httpx
import asyncio
from typing import AsyncIterator


# Voice Director Skills

async def synthesize_chapter(
    script: str,
    voice_id: str,
    voice_settings: dict
) -> bytes:
    """Synthesize a chapter script to audio using ElevenLabs."""
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"https://api.elevenlabs.io/v1/text-to-speech/{voice_id}",
            headers={
                "xi-api-key": os.getenv("ELEVENLABS_API_KEY"),
                "Content-Type": "application/json"
            },
            json={
                "text": script,
                "model_id": "eleven_multilingual_v2",
                "voice_settings": voice_settings
            },
            timeout=120.0
        )
        response.raise_for_status()
        return response.content


def prepare_script_for_synthesis(
    raw_script: str,
    voice_settings: dict
) -> str:
    """Clean and format script for optimal ElevenLabs synthesis."""
    # Replace markers with ElevenLabs-compatible syntax
    script = raw_script

    # Convert pause markers
    script = script.replace("[pause]", " ... ")
    script = script.replace("[PAUSE]", " ... ")

    # Convert emphasis (capitalize for natural emphasis)
    import re
    script = re.sub(r'\[emphasis\](.*?)\[/emphasis\]', lambda m: m.group(1).upper(), script, flags=re.IGNORECASE)

    # Add breaks for sections
    script = re.sub(r'\[SECTION: [^\]]+\]', '\n\n', script)

    # Clean up multiple spaces/newlines
    script = re.sub(r'\n{3,}', '\n\n', script)
    script = re.sub(r' {2,}', ' ', script)

    return script.strip()


def calculate_chunk_boundaries(script: str, max_chars: int = 4000) -> list[dict]:
    """Split script into chunks respecting sentence boundaries."""
    sentences = script.replace('...', '<<<ELLIPSIS>>>').split('.')
    sentences = [s.replace('<<<ELLIPSIS>>>', '...').strip() + '.' for s in sentences if s.strip()]

    chunks = []
    current_chunk = ""
    current_start = 0

    for sentence in sentences:
        if len(current_chunk) + len(sentence) > max_chars and current_chunk:
            chunks.append({
                "text": current_chunk.strip(),
                "char_start": current_start,
                "char_end": current_start + len(current_chunk)
            })
            current_start += len(current_chunk)
            current_chunk = sentence
        else:
            current_chunk += " " + sentence if current_chunk else sentence

    if current_chunk:
        chunks.append({
            "text": current_chunk.strip(),
            "char_start": current_start,
            "char_end": current_start + len(current_chunk)
        })

    return chunks


async def assemble_audio_chapters(
    chapter_audio_files: list[bytes],
    chapter_info: list[dict]
) -> dict:
    """Assemble chapter audio files into final output with metadata."""
    # In production, would use ffmpeg or similar to concatenate
    # and add chapter markers

    total_duration = 0
    chapters_metadata = []

    for i, (audio, info) in enumerate(zip(chapter_audio_files, chapter_info)):
        # Estimate duration from audio size (rough: ~16KB per second for MP3)
        estimated_duration = len(audio) / 16000
        chapters_metadata.append({
            "number": i + 1,
            "title": info["title"],
            "start_time_seconds": total_duration,
            "duration_seconds": estimated_duration
        })
        total_duration += estimated_duration

    return {
        "total_duration_seconds": total_duration,
        "chapters": chapters_metadata,
        "audio_data": b''.join(chapter_audio_files)  # Simplified; real impl would properly merge
    }


def get_voice_settings_for_style(narrative_style: str) -> dict:
    """Get optimal ElevenLabs settings for the narrative style."""
    settings_map = {
        "fiction": {
            "stability": 0.45,
            "similarity_boost": 0.78,
            "style": 0.35,
            "use_speaker_boost": True
        },
        "documentary": {
            "stability": 0.65,
            "similarity_boost": 0.80,
            "style": 0.15,
            "use_speaker_boost": True
        },
        "tutorial": {
            "stability": 0.55,
            "similarity_boost": 0.72,
            "style": 0.25,
            "use_speaker_boost": True
        },
        "podcast": {
            "stability": 0.35,
            "similarity_boost": 0.70,
            "style": 0.45,
            "use_speaker_boost": True
        },
        "technical": {
            "stability": 0.75,
            "similarity_boost": 0.82,
            "style": 0.08,
            "use_speaker_boost": True
        }
    }
    return settings_map.get(narrative_style, settings_map["documentary"])


VOICE_DIRECTOR_SKILLS = [
    Skill(
        name="synthesize_chapter",
        description="Convert a chapter script to audio using ElevenLabs",
        parameters={
            "type": "object",
            "properties": {
                "script": {"type": "string"},
                "voice_id": {"type": "string"},
                "voice_settings": {"type": "object"}
            },
            "required": ["script", "voice_id", "voice_settings"]
        },
        function=synthesize_chapter
    ),
    Skill(
        name="prepare_script_for_synthesis",
        description="Clean and format script for optimal voice synthesis",
        parameters={
            "type": "object",
            "properties": {
                "raw_script": {"type": "string"},
                "voice_settings": {"type": "object"}
            },
            "required": ["raw_script", "voice_settings"]
        },
        function=prepare_script_for_synthesis
    ),
    Skill(
        name="calculate_chunk_boundaries",
        description="Split long scripts into synthesis-friendly chunks",
        parameters={
            "type": "object",
            "properties": {
                "script": {"type": "string"},
                "max_chars": {"type": "integer"}
            },
            "required": ["script"]
        },
        function=calculate_chunk_boundaries
    ),
    Skill(
        name="assemble_audio_chapters",
        description="Combine chapter audio files into final output",
        parameters={
            "type": "object",
            "properties": {
                "chapter_audio_files": {"type": "array"},
                "chapter_info": {"type": "array"}
            },
            "required": ["chapter_audio_files", "chapter_info"]
        },
        function=assemble_audio_chapters
    ),
    Skill(
        name="get_voice_settings_for_style",
        description="Get optimal voice settings for a narrative style",
        parameters={
            "type": "object",
            "properties": {
                "narrative_style": {"type": "string"}
            },
            "required": ["narrative_style"]
        },
        function=get_voice_settings_for_style
    )
]


VOICE_DIRECTOR_SYSTEM_PROMPT = """You are the Voice Director Agent for Code Story.

Your role is to:
1. Prepare narrative scripts for optimal voice synthesis
2. Manage the ElevenLabs API calls for audio generation
3. Handle chunking for long content (ElevenLabs has character limits)
4. Assemble final audio with chapter markers
5. Ensure audio quality and natural pacing

You receive:
- Complete narrative scripts from the Story Architect
- Voice selection and style preferences
- Chapter structure and timing targets

You produce:
- Cleaned, synthesis-ready scripts
- Generated audio files for each chapter
- Final assembled audio with metadata

OPTIMIZATION RULES:
- Always prepare scripts before synthesis (clean markers, format for speech)
- Respect ElevenLabs character limits (~5000 chars per request)
- Use appropriate voice settings for the narrative style
- Handle errors gracefully (retry failed chunks)
- Track timing and adjust pacing if needed"""

voice_director_agent = Agent(
    name="voice_director",
    system_prompt=VOICE_DIRECTOR_SYSTEM_PROMPT,
    skills=VOICE_DIRECTOR_SKILLS
)
```

---

### Complete Pipeline Orchestration

```python
class CodeStoryPipeline:
    """Main pipeline orchestrating all agents."""

    def __init__(self):
        self.orchestrator = AgentOrchestrator()
        self.orchestrator.register_agent(intent_agent)
        self.orchestrator.register_agent(repo_analyzer_agent)
        self.orchestrator.register_agent(story_architect_agent)
        self.orchestrator.register_agent(voice_director_agent)

    async def generate_story(
        self,
        repo_url: str,
        user_intent: str | None = None,
        quick_mode: bool = False,
        preferences: dict | None = None
    ) -> dict:
        """
        Full story generation pipeline.

        Args:
            repo_url: GitHub repository URL
            user_intent: Optional user description of what they want
            quick_mode: Skip detailed onboarding
            preferences: User preferences (style, voice, length, etc.)

        Returns:
            Complete story with audio and metadata
        """
        preferences = preferences or {}

        # Parse repo URL
        owner, repo = self._parse_github_url(repo_url)

        # Step 1: Intent Resolution
        if quick_mode or not user_intent:
            story_plan = await self._quick_plan(owner, repo, preferences)
        else:
            story_plan = await self._intent_conversation(
                owner, repo, user_intent, preferences
            )

        # Step 2: Repository Analysis (focused on story plan)
        analysis = await self.orchestrator.run_agent(
            "repo_analyzer",
            f"Analyze {owner}/{repo} with focus on: {json.dumps(story_plan['focus_areas'])}",
            context={"owner": owner, "repo": repo, "plan": story_plan}
        )

        # Step 3: Story Architecture
        # Update story architect with correct style
        story_architect_agent.system_prompt = get_story_architect_prompt(
            story_plan.get("narrative_style", "documentary")
        )

        scripts = await self.orchestrator.run_agent(
            "story_architect",
            "Create chapter scripts based on the analysis and plan",
            context={
                "plan": story_plan,
                "analysis": analysis,
                "preferences": preferences
            }
        )

        # Step 4: Voice Synthesis
        audio_result = await self.orchestrator.run_agent(
            "voice_director",
            "Generate audio for all chapters",
            context={
                "scripts": scripts,
                "voice_id": story_plan.get("voice_id", "21m00Tcm4TlvDq8ikWAM"),
                "narrative_style": story_plan.get("narrative_style", "documentary")
            }
        )

        return {
            "story_plan": story_plan,
            "analysis_summary": analysis,
            "audio_url": audio_result.get("audio_url"),
            "chapters": audio_result.get("chapters"),
            "duration_seconds": audio_result.get("total_duration_seconds"),
            "script": scripts
        }

    async def _quick_plan(self, owner: str, repo: str, preferences: dict) -> dict:
        """Generate a quick plan without user conversation."""
        # Fetch basic repo info for context
        async with httpx.AsyncClient() as client:
            response = await client.get(
                f"https://api.github.com/repos/{owner}/{repo}",
                headers={"Accept": "application/vnd.github+json"}
            )
            repo_info = response.json()

        return {
            "title": f"{repo_info.get('name', repo)}: An Overview",
            "narrative_style": preferences.get("style", "documentary"),
            "voice_id": preferences.get("voice_id", "29vD33N1CtxCmqQRPOHJ"),
            "target_duration_minutes": preferences.get("duration", 15),
            "expertise_level": preferences.get("expertise", "intermediate"),
            "focus_areas": ["architecture", "key_components", "patterns"],
            "chapters": [
                {"number": 1, "title": "Introduction", "duration_minutes": 2},
                {"number": 2, "title": "Architecture Overview", "duration_minutes": 4},
                {"number": 3, "title": "Key Components", "duration_minutes": 5},
                {"number": 4, "title": "Patterns & Practices", "duration_minutes": 3},
                {"number": 5, "title": "Summary", "duration_minutes": 1}
            ]
        }

    async def _intent_conversation(
        self,
        owner: str,
        repo: str,
        user_intent: str,
        preferences: dict
    ) -> dict:
        """Have a conversation with the user to build a detailed plan."""
        result = await self.orchestrator.run_agent(
            "intent_agent",
            f"User wants to create a story for {owner}/{repo}. Their intent: {user_intent}",
            context={
                "owner": owner,
                "repo": repo,
                "preferences": preferences
            }
        )
        # Parse the plan from the agent's response
        # In production, this would be a structured extraction
        return json.loads(result.get("response", "{}"))

    def _parse_github_url(self, url: str) -> tuple[str, str]:
        """Extract owner and repo from GitHub URL."""
        # Handle various GitHub URL formats
        import re
        patterns = [
            r"github\.com/([^/]+)/([^/]+?)(?:\.git)?(?:/|$)",
            r"^([^/]+)/([^/]+)$"
        ]
        for pattern in patterns:
            match = re.search(pattern, url)
            if match:
                return match.group(1), match.group(2)
        raise ValueError(f"Could not parse GitHub URL: {url}")


# Usage example
async def main():
    pipeline = CodeStoryPipeline()

    # Quick mode
    result = await pipeline.generate_story(
        "https://github.com/fastapi/fastapi",
        quick_mode=True,
        preferences={"style": "documentary", "duration": 15}
    )

    # Custom mode with intent
    result = await pipeline.generate_story(
        "https://github.com/fastapi/fastapi",
        user_intent="I want to understand how dependency injection works in FastAPI",
        preferences={"style": "technical", "expertise": "expert"}
    )
```

---

## Web Application Wireframes

### Landing Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Code Story    [GitHub â­]   [Docs]   [API]   [Sign In] [Try Free]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â”‚              Code â†’ Story â†’ Understanding                                    â”‚
â”‚                                                                              â”‚
â”‚         The open-source platform that transforms                            â”‚
â”‚         repositories into audio narratives                                  â”‚
â”‚                                                                              â”‚
â”‚         Built for developers. Self-host or use our cloud.                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  https://github.com/                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚              [ Generate Story ]      [ View Demo ]                          â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                    â–¶ LISTEN TO A SAMPLE                                     â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  ðŸŽ§ FastAPI: Architecture Deep Dive                               â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚  â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–                    â”‚     â”‚
â”‚   â”‚                                                                    â”‚     â”‚
â”‚   â”‚  [â–¶ Play]  â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”  2:34 / 12:45                   â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚   Try these styles:  [Documentary]  [Tutorial]  [Podcast]  [Fiction]       â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                       WHY CODE STORY?                                        â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  ðŸŽ¯ Intent-     â”‚  â”‚  ðŸ”§ Open        â”‚  â”‚  ðŸš€ API         â”‚            â”‚
â”‚   â”‚     Driven      â”‚  â”‚     Source      â”‚  â”‚     First       â”‚            â”‚
â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚            â”‚
â”‚   â”‚ Tell us what    â”‚  â”‚ Self-host,      â”‚  â”‚ Integrate into  â”‚            â”‚
â”‚   â”‚ you want to     â”‚  â”‚ customize,      â”‚  â”‚ your tools,     â”‚            â”‚
â”‚   â”‚ learnâ€”we        â”‚  â”‚ contribute.     â”‚  â”‚ CI/CD, docs     â”‚            â”‚
â”‚   â”‚ tailor the      â”‚  â”‚ MIT licensed.   â”‚  â”‚ pipeline.       â”‚            â”‚
â”‚   â”‚ story.          â”‚  â”‚                 â”‚  â”‚                 â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  ðŸ¤– Claude      â”‚  â”‚  ðŸ“š Multiple    â”‚  â”‚  â±ï¸ Flexible    â”‚            â”‚
â”‚   â”‚     Agents      â”‚  â”‚     Styles      â”‚  â”‚     Length      â”‚            â”‚
â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚            â”‚
â”‚   â”‚ Multi-agent     â”‚  â”‚ Fiction,        â”‚  â”‚ 5 min quick     â”‚            â”‚
â”‚   â”‚ architecture    â”‚  â”‚ documentary,    â”‚  â”‚ overview to     â”‚            â”‚
â”‚   â”‚ for deep        â”‚  â”‚ tutorial,       â”‚  â”‚ 45+ min deep    â”‚            â”‚
â”‚   â”‚ analysis.       â”‚  â”‚ podcast, tech.  â”‚  â”‚ dives.          â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                    POPULAR STORIES                                          â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚   â”‚ â”‚ langchain    â”‚ â”‚ react        â”‚ â”‚ pytorch      â”‚ â”‚ kubernetes   â”‚â”‚   â”‚
â”‚   â”‚ â”‚ ðŸŽ§ 15:32     â”‚ â”‚ ðŸŽ§ 22:10     â”‚ â”‚ ðŸŽ§ 18:45     â”‚ â”‚ ðŸŽ§ 25:03     â”‚â”‚   â”‚
â”‚   â”‚ â”‚ Documentary  â”‚ â”‚ Tutorial     â”‚ â”‚ Technical    â”‚ â”‚ Documentary  â”‚â”‚   â”‚
â”‚   â”‚ â”‚ â–¶ Play      â”‚ â”‚ â–¶ Play      â”‚ â”‚ â–¶ Play      â”‚ â”‚ â–¶ Play      â”‚â”‚   â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚                        [ Browse All Stories ]                               â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                    FOR TEAMS & ENTERPRISES                                  â”‚
â”‚                                                                              â”‚
â”‚   â€¢ Self-hosted deployment with Docker/Kubernetes                           â”‚
â”‚   â€¢ Private repository support                                              â”‚
â”‚   â€¢ Custom voice training                                                   â”‚
â”‚   â€¢ Team collaboration features                                             â”‚
â”‚   â€¢ Priority support                                                        â”‚
â”‚                                                                              â”‚
â”‚                       [ Contact Sales ]                                     â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  [Logo]                                                                      â”‚
â”‚                                                                              â”‚
â”‚  Product        Developers       Company         Connect                    â”‚
â”‚  Features       Documentation    About           GitHub                     â”‚
â”‚  Pricing        API Reference    Blog            Twitter                    â”‚
â”‚  Changelog      Self-Hosting     Careers         Discord                    â”‚
â”‚                 Examples                                                    â”‚
â”‚                                                                              â”‚
â”‚  Â© 2025 Code Story â€¢ MIT License â€¢ Privacy â€¢ Terms                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Code Story    [Search stories...]        [ðŸ””] [API] [ðŸ‘¤ Sarah â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  [ + New Story ]                                                     â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  Transform any repository into an audio narrative                    â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  CONTINUE LISTENING                                                          â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸŽ§ FastAPI Deep Dive: Dependency Injection                          â”‚    â”‚
â”‚  â”‚     Technical â€¢ 28:45 total                                          â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  18:32 remaining                â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     Chapter 4: Request Lifecycle                                     â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚  [ â–¶ Resume ]    [ Chapters ]    [ Restart ]                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  YOUR STORIES                                     [All â–¼] [Sort: Recent â–¼]  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ“ react-query                                                      â”‚    â”‚
â”‚  â”‚     Documentary â€¢ 15:34 â€¢ Generated Dec 29, 2025                    â”‚    â”‚
â”‚  â”‚     Focus: Caching strategy, Query invalidation                      â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     [ â–¶ Play ]  [ ðŸ“¥ ]  [ ðŸ”— Share ]  [ âœï¸ Regenerate ]  [ â‹® ]     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ“ shadcn-ui                                                        â”‚    â”‚
â”‚  â”‚     Fiction â€¢ 22:10 â€¢ Generated Dec 27, 2025                        â”‚    â”‚
â”‚  â”‚     Focus: Component architecture, Styling patterns                  â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     [ â–¶ Play ]  [ ðŸ“¥ ]  [ ðŸ”— Share ]  [ âœï¸ Regenerate ]  [ â‹® ]     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â³ langchain (Processing...)                                        â”‚    â”‚
â”‚  â”‚     Tutorial â€¢ Started 3 minutes ago                                 â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  68%                           â”‚    â”‚
â”‚  â”‚     Generating chapter 4 of 6...                                     â”‚    â”‚
â”‚  â”‚                                                                       â”‚    â”‚
â”‚  â”‚     [ View Details ]                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                              â”‚
â”‚  QUICK STATS                                                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 12          â”‚ â”‚ 4h 32m      â”‚ â”‚ 8           â”‚ â”‚ 3           â”‚          â”‚
â”‚  â”‚ Stories     â”‚ â”‚ Listened    â”‚ â”‚ Repos       â”‚ â”‚ Shared      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Story Player (Full Experience)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Dashboard]     FastAPI Deep Dive          [ðŸ”— Share] [ðŸ“¥] [âš™ï¸] [â‹®]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                         â”‚                                â”‚â”‚
â”‚  â”‚  AUDIO WAVEFORM / VISUALIZATION         â”‚  CHAPTER NAVIGATION           â”‚â”‚
â”‚  â”‚                                         â”‚                                â”‚â”‚
â”‚  â”‚  â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†    â”‚  â–¡ 1. Introduction      0:00  â”‚â”‚
â”‚  â”‚  â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„    â”‚  â–¡ 2. The Depends()     2:15  â”‚â”‚
â”‚  â”‚  â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„    â”‚  â–  3. Resolution Algo   8:42  â”‚â”‚
â”‚  â”‚                                         â”‚  â—‹ 4. Request Lifecycle 15:30 â”‚â”‚
â”‚  â”‚                                         â”‚  â—‹ 5. Caching           22:15 â”‚â”‚
â”‚  â”‚  Chapter 3: Dependency Resolution       â”‚  â—‹ 6. Patterns          26:00 â”‚â”‚
â”‚  â”‚                                         â”‚                                â”‚â”‚
â”‚  â”‚  "The algorithm performs a depth-first  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚   traversal of the dependency graph..." â”‚                                â”‚â”‚
â”‚  â”‚                          â† Live caption â”‚  STORY INFO                   â”‚â”‚
â”‚  â”‚                                         â”‚                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Style: Technical             â”‚â”‚
â”‚                                            â”‚  Voice: Antoni                 â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Length: 28:45                â”‚â”‚
â”‚  â”‚                                         â”‚  Expertise: Expert            â”‚â”‚
â”‚  â”‚  â®   âª15   [ â–¶ ]   15â©   â­           â”‚                                â”‚â”‚
â”‚  â”‚                                         â”‚  Generated: Dec 29, 2025      â”‚â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”    â”‚                                â”‚â”‚
â”‚  â”‚                                         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚  10:18                         28:45    â”‚                                â”‚â”‚
â”‚  â”‚                                         â”‚  FOCUS AREAS                  â”‚â”‚
â”‚  â”‚  ðŸ”Š â”â”â”â”â”â”â—â”â”â”â”â”â”   [1x â–¼]   [CC]      â”‚  â€¢ Dependency injection       â”‚â”‚
â”‚  â”‚                                         â”‚  â€¢ Request lifecycle          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â€¢ Scoped dependencies        â”‚â”‚
â”‚                                            â”‚                                â”‚â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                                            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  CURRENT CHAPTER INSIGHTS                  â”‚                                â”‚â”‚
â”‚                                            â”‚  KEY FILES                     â”‚â”‚
â”‚  The dependency resolution algorithm in    â”‚                                â”‚â”‚
â”‚  FastAPI uses several key components:      â”‚  ðŸ“„ dependencies/utils.py     â”‚â”‚
â”‚                                            â”‚  ðŸ“„ dependencies/models.py    â”‚â”‚
â”‚  â€¢ `solve_dependencies()` - Main resolver  â”‚  ðŸ“„ routing.py                â”‚â”‚
â”‚  â€¢ `get_dependant()` - Dependency parser   â”‚                                â”‚â”‚
â”‚  â€¢ `request_state` - Caching mechanism     â”‚  [ View in GitHub ]           â”‚â”‚
â”‚                                            â”‚                                â”‚â”‚
â”‚  Referenced in: dependencies/utils.py:145  â”‚                                â”‚â”‚
â”‚                                            â”‚                                â”‚â”‚
â”‚  [ View Code ]  [ Jump to File ]           â”‚                                â”‚â”‚
â”‚                                            â”‚                                â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mobile Application Wireframes (Expo)

### Home Screen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” â”‚
â”‚  Code Story          [ðŸ‘¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚  Good morning, Sarah      â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚    [ + New Story ]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚  CONTINUE LISTENING       â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸŽ§ FastAPI Deep Dive  â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ Chapter 3: Resolution â”‚ â”‚
â”‚ â”‚ â”â”â”â”â”â”â—â”â”â”â”â” 10:18    â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚     [ â–¶ Resume ]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚  YOUR STORIES             â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ react-query           â”‚ â”‚
â”‚ â”‚ Documentary â€¢ 15:34   â”‚ â”‚
â”‚ â”‚ Caching, Invalidation â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ shadcn-ui             â”‚ â”‚
â”‚ â”‚ Fiction â€¢ 22:10       â”‚ â”‚
â”‚ â”‚ Components, Styling   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ langchain             â”‚ â”‚
â”‚ â”‚ â³ Processing... 68%  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ðŸ ]  [ðŸ”]  [ðŸ“š]  [âš™ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### New Story Flow - Intent Input

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” â”‚
â”‚  [â†] New Story            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚  What code do you want    â”‚
â”‚  to understand?           â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ github.com/fastapi/   â”‚ â”‚
â”‚ â”‚ fastapi               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚         [Continue â†’]      â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚  Or try a popular repo:   â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ langchain â”‚â”‚ react     â”‚â”‚
â”‚ â”‚ â­ 75k    â”‚â”‚ â­ 215k   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ pytorch   â”‚â”‚ next.js   â”‚â”‚
â”‚ â”‚ â­ 74k    â”‚â”‚ â­ 118k   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ðŸ ]  [ðŸ”]  [ðŸ“š]  [âš™ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### New Story Flow - Quick vs Custom

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” â”‚
â”‚  [â†] New Story            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚  âœ“ Repository found       â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ”— fastapi/fastapi    â”‚ â”‚
â”‚ â”‚    Python â€¢ â­ 68k    â”‚ â”‚
â”‚ â”‚    Web framework      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚  How should we proceed?   â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âš¡ Quick Generate     â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ AI creates a ~15 min  â”‚ â”‚
â”‚ â”‚ overview covering     â”‚ â”‚
â”‚ â”‚ architecture & key    â”‚ â”‚
â”‚ â”‚ components            â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚   [ Generate Now â†’ ]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸŽ¯ Customize          â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ Tell us what you want â”‚ â”‚
â”‚ â”‚ to learnâ€”we'll tailor â”‚ â”‚
â”‚ â”‚ the story for you     â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚   [ Start Chat â†’ ]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ðŸ ]  [ðŸ”]  [ðŸ“š]  [âš™ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### New Story Flow - Chat Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” â”‚
â”‚  [â†] Customize Story      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ¤– Code Story AI      â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ What would you like   â”‚ â”‚
â”‚ â”‚ to learn about        â”‚ â”‚
â”‚ â”‚ fastapi/fastapi?      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚  Quick options:           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚Architectâ”‚ â”‚Learn to â”‚  â”‚
â”‚ â”‚ure      â”‚ â”‚contribute â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚Specific â”‚ â”‚Code     â”‚  â”‚
â”‚ â”‚feature  â”‚ â”‚review   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ‘¤ You                â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ I want to understand  â”‚ â”‚
â”‚ â”‚ how dependency        â”‚ â”‚
â”‚ â”‚ injection works       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ¤– Great! Should I    â”‚ â”‚
â”‚ â”‚ focus on how to use   â”‚ â”‚
â”‚ â”‚ it, or how it's       â”‚ â”‚
â”‚ â”‚ implemented?          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Type your answer... â–Œ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         [Send â†’]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ðŸ ]  [ðŸ”]  [ðŸ“š]  [âš™ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Player - Full Screen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” â”‚
â”‚  [âˆ¨] Now Playing     [â‹®]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚   â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒ    â”‚  â”‚
â”‚  â”‚   â–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„    â”‚  â”‚
â”‚  â”‚   â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…    â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚
â”‚   FastAPI Deep Dive       â”‚
â”‚   Technical â€¢ Expert      â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚   Chapter 3               â”‚
â”‚   Dependency Resolution   â”‚
â”‚                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  10:18              28:45 â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚   â®    âª    â–¶    â©    â­ â”‚
â”‚                           â”‚
â”‚                           â”‚
â”‚  ðŸ”Š â”â”â”â—â”â”â”â”   [1.0x â–¼]  â”‚
â”‚                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                           â”‚
â”‚  [ðŸ“– Chapters] [ðŸ“¥ Save]  â”‚
â”‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ðŸŽ§ Mini Player     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Player - Chapters Sheet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      [  â•  ]        â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  CHAPTERS           â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â–¡ 1. Introduction  â”‚  â”‚
â”‚  â”‚       0:00 â€¢ 2:15   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â–¡ 2. The Depends() â”‚  â”‚
â”‚  â”‚       2:15 â€¢ 6:27   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â–  3. Resolution    â”‚  â”‚
â”‚  â”‚       8:42 â€¢ 6:48   â”‚  â”‚
â”‚  â”‚       â–¶ Playing     â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â—‹ 4. Request Life  â”‚  â”‚
â”‚  â”‚       15:30 â€¢ 6:45  â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â—‹ 5. Caching       â”‚  â”‚
â”‚  â”‚       22:15 â€¢ 3:45  â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â—‹ 6. Patterns      â”‚  â”‚
â”‚  â”‚       26:00 â€¢ 2:45  â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚
â”‚ â”â”â”â”â”â”â”â—â”â”â”â”â”â” 10:18     â”‚
â”‚  â®  âª  [ â–¶ ]  â©  â­     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Admin Dashboard Wireframes

### Admin Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Code Story Admin                        [ðŸ””] [ðŸ‘¤ Admin â–¼] [Logout] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                                              â”‚
â”‚  ðŸ“Š Overview â”‚  SYSTEM HEALTH                                    Dec 31, 2025â”‚
â”‚              â”‚                                                              â”‚
â”‚  ðŸ‘¥ Users    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚              â”‚  â”‚ â— Healthy  â”‚ â”‚ â— Healthy  â”‚ â”‚ â— Healthy  â”‚ â”‚ âš  Warning  â”‚â”‚
â”‚  ðŸŽ§ Stories  â”‚  â”‚ API Server â”‚ â”‚ Claude API â”‚ â”‚ ElevenLabs â”‚ â”‚ Queue      â”‚â”‚
â”‚              â”‚  â”‚ 45ms avg   â”‚ â”‚ 1.2s avg   â”‚ â”‚ 0.8s avg   â”‚ â”‚ 234 jobs   â”‚â”‚
â”‚  ðŸ’° Billing  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                                                              â”‚
â”‚  ðŸ“ˆ Analyticsâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚              â”‚                                                              â”‚
â”‚  ðŸ”§ Settings â”‚  KEY METRICS (Last 30 Days)                                 â”‚
â”‚              â”‚                                                              â”‚
â”‚  ðŸ“ Logs     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚              â”‚  â”‚ 1,847        â”‚ â”‚ 5,234        â”‚ â”‚ 892          â”‚        â”‚
â”‚  ðŸ”Œ API Keys â”‚  â”‚ Active Users â”‚ â”‚ Stories Gen  â”‚ â”‚ API Requests â”‚        â”‚
â”‚              â”‚  â”‚ â†‘ 23%        â”‚ â”‚ â†‘ 18%        â”‚ â”‚ â†‘ 45%        â”‚        â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚              â”‚  â”‚ 47.2 hrs     â”‚ â”‚ $2,847       â”‚ â”‚ 99.7%        â”‚        â”‚
â”‚              â”‚  â”‚ Audio Gen    â”‚ â”‚ API Costs    â”‚ â”‚ Success Rate â”‚        â”‚
â”‚              â”‚  â”‚ â†‘ 31%        â”‚ â”‚ â†‘ 22%        â”‚ â”‚ â†‘ 0.3%       â”‚        â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”‚  USAGE TRENDS                                                â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚  â”‚ Stories Generated                                      â”‚ â”‚
â”‚              â”‚  â”‚ 250 â”¤                                           â•±â•²     â”‚ â”‚
â”‚              â”‚  â”‚ 200 â”¤                              â•±â•²    â•±â•²    â•±  â•²    â”‚ â”‚
â”‚              â”‚  â”‚ 150 â”¤               â•±â•²    â•±â•²     â•±  â•²  â•±  â•²  â•±       â”‚ â”‚
â”‚              â”‚  â”‚ 100 â”¤    â•±â•²   â•±â•²  â•±  â•²  â•±  â•²   â•±    â•²â•±              â”‚ â”‚
â”‚              â”‚  â”‚  50 â”¤   â•±  â•² â•±  â•²â•±              â•²â•±                    â”‚ â”‚
â”‚              â”‚  â”‚   0 â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚              â”‚  â”‚       Dec 1        Dec 15        Dec 31               â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚              â”‚                                                              â”‚
â”‚              â”‚  RECENT ACTIVITY                                             â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚  â”‚ â€¢ Story completed: react-query (user: sarah@)    2m   â”‚ â”‚
â”‚              â”‚  â”‚ â€¢ New user registration: alex@dev.io             5m   â”‚ â”‚
â”‚              â”‚  â”‚ â€¢ API key generated: team_acme_prod              8m   â”‚ â”‚
â”‚              â”‚  â”‚ â€¢ Story failed: kubernetes (timeout)            12m   â”‚ â”‚
â”‚              â”‚  â”‚ â€¢ High usage alert: user_234 (quota 90%)        15m   â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin: User Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ‘¥ USER MANAGEMENT                                         [+ Invite User] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  [Search users...]                                                           â”‚
â”‚                                                                              â”‚
â”‚  Filters: [Status: All â–¼] [Plan: All â–¼] [Date: All time â–¼] [Export CSV]    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ User            â”‚ Plan      â”‚ Stories â”‚ Usage      â”‚ Joined    â”‚ Act. â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸ‘¤ Sarah Chen   â”‚ Pro       â”‚ 45      â”‚ 78% quota  â”‚ Nov 2024  â”‚ [â‹®] â”‚   â”‚
â”‚  â”‚    sarah@co.io  â”‚ $19/mo    â”‚         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ â”‚           â”‚      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸ‘¤ John Smith   â”‚ Free      â”‚ 3       â”‚ 30% quota  â”‚ Dec 2024  â”‚ [â‹®] â”‚   â”‚
â”‚  â”‚    john@mail.io â”‚ -         â”‚         â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚           â”‚      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸ‘¤ Acme Corp    â”‚ Team      â”‚ 234     â”‚ 45% quota  â”‚ Oct 2024  â”‚ [â‹®] â”‚   â”‚
â”‚  â”‚    admin@acme   â”‚ $99/mo    â”‚ (team)  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ â”‚ 12 seats  â”‚      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ðŸ‘¤ Maria Garcia â”‚ Pro       â”‚ 67      â”‚ 92% quota  â”‚ Sep 2024  â”‚ [â‹®] â”‚   â”‚
â”‚  â”‚    maria@dev.io â”‚ $19/mo    â”‚         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ âš  Near   â”‚      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  Showing 1-4 of 1,847 users              [< Prev] [1] [2] [3] ... [Next >]  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin: API Costs & Usage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ’° API COSTS & USAGE                    [Date Range: Dec 2025 â–¼] [Export]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  CURRENT MONTH SUMMARY                                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CLAUDE API          â”‚ â”‚ ELEVENLABS          â”‚ â”‚ GITHUB API          â”‚   â”‚
â”‚  â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚   â”‚
â”‚  â”‚ Tokens: 8.4M        â”‚ â”‚ Characters: 5.2M    â”‚ â”‚ Requests: 124K      â”‚   â”‚
â”‚  â”‚ Cost: $252.00       â”‚ â”‚ Cost: $156.00       â”‚ â”‚ Cost: $0 (free)     â”‚   â”‚
â”‚  â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 78% â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 65%  â”‚ â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 12%  â”‚   â”‚
â”‚  â”‚ of $320 budget      â”‚ â”‚ of $240 budget      â”‚ â”‚ of 1M limit         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  TOTAL: $408.00 / $600.00 budget (68%)                                      â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  COST BY FEATURE                                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Repository Analysis    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  48%   $196.00â”‚   â”‚
â”‚  â”‚ Story Generation       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  38%   $155.00â”‚   â”‚
â”‚  â”‚ Voice Synthesis        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  14%    $57.00â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  COST BY USER TIER                                                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tier      â”‚ Users  â”‚ Stories â”‚ Tokens Used â”‚ Cost    â”‚ Revenue     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Free      â”‚ 1,423  â”‚ 2,134   â”‚ 2.1M        â”‚ $63.00  â”‚ $0          â”‚   â”‚
â”‚  â”‚ Pro       â”‚ 389    â”‚ 2,567   â”‚ 4.8M        â”‚ $287.00 â”‚ $7,391      â”‚   â”‚
â”‚  â”‚ Team      â”‚ 35     â”‚ 533     â”‚ 1.5M        â”‚ $58.00  â”‚ $3,465      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ TOTAL     â”‚ 1,847  â”‚ 5,234   â”‚ 8.4M        â”‚ $408.00 â”‚ $10,856     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  Gross Margin: $10,448 (96.2%)                                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin: API Keys Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”Œ API KEYS                                              [+ Create New Key]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  API keys allow external applications to use Code Story programmatically.   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Name           â”‚ Key (partial) â”‚ Permissions â”‚ Usage    â”‚ Created â”‚Actâ”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Production     â”‚ cs_prod_***7a â”‚ Full        â”‚ 45K req  â”‚ Oct 24  â”‚[â‹®]â”‚   â”‚
â”‚  â”‚ Acme Corp      â”‚               â”‚             â”‚ this mo  â”‚         â”‚   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ CI/CD Pipeline â”‚ cs_ci_***3f2  â”‚ Read Only   â”‚ 12K req  â”‚ Nov 24  â”‚[â‹®]â”‚   â”‚
â”‚  â”‚ Internal       â”‚               â”‚             â”‚ this mo  â”‚         â”‚   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Dev Testing    â”‚ cs_dev_***8b1 â”‚ Full        â”‚ 234 req  â”‚ Dec 24  â”‚[â‹®]â”‚   â”‚
â”‚  â”‚ Sarah Chen     â”‚               â”‚ (sandbox)   â”‚ this mo  â”‚         â”‚   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  API DOCUMENTATION                                                           â”‚
â”‚                                                                              â”‚
â”‚  Base URL: https://api.codestory.dev/v1                                     â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # Generate a story                                                    â”‚   â”‚
â”‚  â”‚ curl -X POST https://api.codestory.dev/v1/stories \                  â”‚   â”‚
â”‚  â”‚   -H "Authorization: Bearer cs_prod_***" \                           â”‚   â”‚
â”‚  â”‚   -H "Content-Type: application/json" \                              â”‚   â”‚
â”‚  â”‚   -d '{                                                               â”‚   â”‚
â”‚  â”‚     "repo_url": "https://github.com/fastapi/fastapi",                â”‚   â”‚
â”‚  â”‚     "intent": "Explain dependency injection",                        â”‚   â”‚
â”‚  â”‚     "style": "technical",                                            â”‚   â”‚
â”‚  â”‚     "length": "deep_dive"                                            â”‚   â”‚
â”‚  â”‚   }'                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  [ View Full Documentation ]                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Models (Updated)

### PostgreSQL Schema

```sql
-- Users Table
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    subscription_tier VARCHAR(50) DEFAULT 'free',
    preferences JSONB DEFAULT '{}',
    usage_quota JSONB DEFAULT '{"stories_per_month": 5, "minutes_per_month": 60}',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Repositories Table
CREATE TABLE repositories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    repo_url VARCHAR(500) NOT NULL,
    repo_name VARCHAR(255) NOT NULL,
    repo_owner VARCHAR(255) NOT NULL,
    primary_language VARCHAR(100),
    stars_count INTEGER,
    analysis_cache JSONB,
    analysis_cached_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Story Intents Table (NEW - captures user's learning goals)
CREATE TABLE story_intents (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    repository_id UUID REFERENCES repositories(id) ON DELETE CASCADE,
    intent_category VARCHAR(100) NOT NULL,
    user_description TEXT,
    focus_areas JSONB DEFAULT '[]',
    expertise_level VARCHAR(50) DEFAULT 'intermediate',
    conversation_history JSONB DEFAULT '[]',
    generated_plan JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Stories Table (Updated)
CREATE TABLE stories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    intent_id UUID REFERENCES story_intents(id) ON DELETE SET NULL,
    repository_id UUID REFERENCES repositories(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(500) NOT NULL,
    narrative_style VARCHAR(50) NOT NULL,
    voice_id VARCHAR(100) NOT NULL,
    target_duration_minutes INTEGER,
    actual_duration_seconds INTEGER,
    expertise_level VARCHAR(50),
    script_text TEXT,
    audio_url VARCHAR(500),
    chapters JSONB DEFAULT '[]',
    status VARCHAR(50) DEFAULT 'pending',
    processing_started_at TIMESTAMP WITH TIME ZONE,
    processing_completed_at TIMESTAMP WITH TIME ZONE,
    error_message TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Story Chapters Table
CREATE TABLE story_chapters (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    story_id UUID REFERENCES stories(id) ON DELETE CASCADE,
    chapter_number INTEGER NOT NULL,
    title VARCHAR(255) NOT NULL,
    start_time_seconds INTEGER NOT NULL,
    duration_seconds INTEGER,
    script_segment TEXT,
    audio_url VARCHAR(500),
    focus_files JSONB DEFAULT '[]',
    key_concepts JSONB DEFAULT '[]'
);

-- API Keys Table (for external API access)
CREATE TABLE api_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    key_hash VARCHAR(255) NOT NULL,
    key_prefix VARCHAR(20) NOT NULL,
    permissions JSONB DEFAULT '["read", "write"]',
    rate_limit INTEGER DEFAULT 1000,
    last_used_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Usage Logs Table
CREATE TABLE usage_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    api_key_id UUID REFERENCES api_keys(id) ON DELETE SET NULL,
    action_type VARCHAR(100) NOT NULL,
    resource_type VARCHAR(100),
    resource_id UUID,
    tokens_used INTEGER DEFAULT 0,
    characters_used INTEGER DEFAULT 0,
    cost_usd DECIMAL(10, 4) DEFAULT 0,
    metadata JSONB DEFAULT '{}',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_stories_user_id ON stories(user_id);
CREATE INDEX idx_stories_status ON stories(status);
CREATE INDEX idx_usage_logs_user_id ON usage_logs(user_id);
CREATE INDEX idx_usage_logs_created_at ON usage_logs(created_at);
CREATE INDEX idx_api_keys_key_prefix ON api_keys(key_prefix);
```

---

## API Endpoints (Updated)

### Public API (for external developers)

MethodEndpointDescription`POST/api/v1/stories`Create a new story`GET/api/v1/stories/{id}`Get story details`GET/api/v1/stories/{id}/audio`Stream audio`GET/api/v1/stories/{id}/chapters`Get chapters`DELETE/api/v1/stories/{id}`Delete a story`GET/api/v1/repositories/analyze`Analyze repo (preview)

### Story Creation Request

```json
{
  "repo_url": "https://github.com/fastapi/fastapi",
  "intent": "Explain how dependency injection works",
  "style": "technical",
  "length": "deep_dive",
  "expertise": "expert",
  "voice_id": "antoni",
  "focus_areas": ["dependencies", "request_lifecycle"],
  "chapter_preferences": {
    "include_code_snippets": false,
    "include_reflection_points": true
  }
}
```

### Story Response

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "processing",
  "estimated_completion_seconds": 180,
  "progress": {
    "stage": "analyzing",
    "percent": 35,
    "message": "Mapping repository structure..."
  },
  "webhook_url": "https://api.codestory.dev/v1/stories/550e.../status"
}
```

---

## Development Phases (Updated)

### Phase 1: Core Platform (Weeks 1â€“8)

- [ ] Python FastAPI backend with authentication
- [ ] Claude Agent SDK integration with 4 agents
- [ ] Custom skills library for code analysis
- [ ] ElevenLabs voice integration
- [ ] PostgreSQL database setup
- [ ] Basic React web application
- [ ] Intent conversation flow (simplified)
- [ ] Quick Generate mode
- [ ] Single narrative style (Documentary)
- [ ] Basic audio player with chapters

### Phase 2: Full Experience (Weeks 9â€“16)

- [ ] All 5 narrative styles with style-specific prompts
- [ ] Full conversational onboarding
- [ ] Chapter structure customization
- [ ] Multiple voice options
- [ ] Expo mobile application
- [ ] Story sharing and public links
- [ ] User preferences and history
- [ ] Download and offline support

### Phase 3: Open Source & API (Weeks 17â€“24)

- [ ] Public API for external developers
- [ ] API key management
- [ ] Self-hosting documentation (Docker)
- [ ] Admin dashboard
- [ ] Usage analytics and cost tracking
- [ ] Rate limiting and quota management
- [ ] GitHub OAuth for private repos
- [ ] Open source release preparation

### Phase 4: Scale & Enterprise (Weeks 25+)

- [ ] Team/organization features
- [ ] Custom voice training (ElevenLabs PVC)
- [ ] Multi-language support
- [ ] Kubernetes deployment guides
- [ ] Enterprise SSO integration
- [ ] Priority support tier
- [ ] Advanced analytics

---

## Action Items

### Immediate (Week 1)

- [ ] Set up Python project structure with FastAPI
- [ ] Configure Claude Agent SDK with basic agent
- [ ] Create GitHub repository (public, MIT license)
- [ ] Set up development environment documentation
- [ ] Design database schema and create migrations

### Short-term (Weeks 2â€“4)

- [ ] Implement Intent Agent with conversation skills
- [ ] Implement Repository Analyzer Agent with GitHub integration
- [ ] Implement Story Architect Agent with style-specific prompts
- [ ] Implement Voice Director Agent with ElevenLabs integration
- [ ] Build React web app with onboarding flow
- [ ] Create basic audio player component

### Medium-term (Weeks 5â€“8)

- [ ] Complete all narrative style prompts
- [ ] Build mobile app with Expo
- [ ] Implement admin dashboard
- [ ] Add API key management
- [ ] Write self-hosting documentation
- [ ] Prepare for public launch