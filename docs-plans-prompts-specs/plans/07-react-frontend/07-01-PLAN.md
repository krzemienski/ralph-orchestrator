---
phase: 07-react-frontend
plan: 01
type: execute
domain: react-web
---

<objective>
Set up React frontend project with Vite, Tailwind CSS, shadcn/ui, and essential configuration.
</objective>

<context>
@BRIEF.md
</context>

<tasks>

<task type="auto">
  <n>Task 1: Initialize React project with Vite</n>
  <files>codestory/frontend/package.json, codestory/frontend/vite.config.ts, codestory/frontend/tsconfig.json</files>
  <action>
Create Vite React project:

```bash
cd codestory
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install
```

Configure vite.config.ts:

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
      '/ws': {
        target: 'ws://localhost:8000',
        ws: true,
      },
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
})
```

Update tsconfig.json:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```
  </action>
  <verify>cd codestory/frontend && npm run build</verify>
  <done>Vite project initialized</done>
</task>

<task type="auto">
  <n>Task 2: Install and configure Tailwind CSS and shadcn/ui</n>
  <files>codestory/frontend/tailwind.config.js, codestory/frontend/src/index.css</files>
  <action>
Install Tailwind:

```bash
cd codestory/frontend
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Configure tailwind.config.js:

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: ["class"],
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
}
```

Initialize shadcn/ui:

```bash
npx shadcn@latest init
```

Install core components:

```bash
npx shadcn@latest add button card input label toast dialog
npx shadcn@latest add dropdown-menu avatar badge progress
npx shadcn@latest add tabs scroll-area separator slider
```

Update src/index.css:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
```
  </action>
  <verify>cd codestory/frontend && npm run build</verify>
  <done>Tailwind and shadcn/ui configured</done>
</task>

<task type="auto">
  <n>Task 3: Create project structure and routing</n>
  <files>codestory/frontend/src/App.tsx, codestory/frontend/src/main.tsx</files>
  <action>
Install React Router:

```bash
npm install react-router-dom
```

Create src/App.tsx:

```typescript
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
import { Toaster } from '@/components/ui/toaster'
import { AuthProvider } from '@/contexts/AuthContext'
import { ProtectedRoute } from '@/components/ProtectedRoute'

// Pages
import { LandingPage } from '@/pages/LandingPage'
import { LoginPage } from '@/pages/LoginPage'
import { RegisterPage } from '@/pages/RegisterPage'
import { DashboardPage } from '@/pages/DashboardPage'
import { NewStoryPage } from '@/pages/NewStoryPage'
import { StoryDetailPage } from '@/pages/StoryDetailPage'
import { PlayerPage } from '@/pages/PlayerPage'

function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
        <Routes>
          {/* Public routes */}
          <Route path="/" element={<LandingPage />} />
          <Route path="/login" element={<LoginPage />} />
          <Route path="/register" element={<RegisterPage />} />
          
          {/* Protected routes */}
          <Route path="/dashboard" element={
            <ProtectedRoute>
              <DashboardPage />
            </ProtectedRoute>
          } />
          <Route path="/stories/new" element={
            <ProtectedRoute>
              <NewStoryPage />
            </ProtectedRoute>
          } />
          <Route path="/stories/:storyId" element={
            <ProtectedRoute>
              <StoryDetailPage />
            </ProtectedRoute>
          } />
          <Route path="/stories/:storyId/play" element={
            <ProtectedRoute>
              <PlayerPage />
            </ProtectedRoute>
          } />
          
          {/* Fallback */}
          <Route path="*" element={<Navigate to="/" replace />} />
        </Routes>
        <Toaster />
      </AuthProvider>
    </BrowserRouter>
  )
}

export default App
```

Create folder structure:

```
src/
├── components/
│   ├── ui/           # shadcn components
│   ├── layout/       # Header, Footer, Sidebar
│   └── stories/      # Story-specific components
├── contexts/
│   └── AuthContext.tsx
├── hooks/
│   ├── useAuth.ts
│   └── useStories.ts
├── lib/
│   ├── api.ts        # API client
│   └── utils.ts      # Utilities
├── pages/
│   ├── LandingPage.tsx
│   ├── LoginPage.tsx
│   └── ...
└── types/
    └── index.ts      # TypeScript types
```
  </action>
  <verify>cd codestory/frontend && npm run build</verify>
  <done>Project structure created</done>
</task>

</tasks>

<playwright_validation_gate>
```
Playwright Action: Navigate to http://localhost:3000
Expected: Landing page renders

Playwright Action: Navigate to /dashboard (unauthenticated)
Expected: Redirect to /login

Playwright Action: Check for Tailwind styling
Expected: CSS variables applied, components styled
```
</playwright_validation_gate>
